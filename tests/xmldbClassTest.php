<?php 

/**
* Simple tests for calendarClassTest
*/

require_once 'PHPUnit/Framework.php';
require_once 'config.php';
require_once getPath('tests').'files/classes/xmldb.class.php';

class xmldbClassTest extends PHPUnit_Framework_TestCase 
{
    private $x;
    
    protected function setUp() {
        $this->x = new Xmldb;
    }
    
    public function testGet_CONF() {
        $dummy = array(
                    'sg_site' => unserialize('N;'),
                    'fs_site' => unserialize('N;'),
                    'site_url' => unserialize('s:28:"http://localhost/public_html";'),
                    'site_admin_url' => unserialize('s:34:"http://localhost/public_html/admin";'),
                    'site_name' => unserialize('s:12:"Geeklog Site";'),
                    'site_slogan' => unserialize('s:26:"Another Nifty Geeklog Site";'),
                    'microsummary_short' => unserialize('s:4:"GL: ";'),
                    'site_disabled_msg' => unserialize('s:44:"Geeklog Site is down. Please come back soon.";'),
                    'copyrightyear' => unserialize('unset'),
                    'url_rewrite' => unserialize('b:0;'),
                    'fs_mail' => unserialize('N;'),
                    'site_mail' => unserialize('s:15:"admin@localhost";'),
                    'noreply_mail' => unserialize('s:17:"noreply@localhost";'),
                    'mail_settings' => unserialize('a:8:{s:7:"backend";s:4:"mail";s:13:"sendmail_path";s:17:"/usr/bin/sendmail";s:13:"sendmail_args";s:0:"";s:4:"host";s:16:"smtp.example.com";s:4:"port";s:2:"25";s:4:"auth";b:0;s:8:"username";s:13:"smtp-username";s:8:"password";s:13:"smtp-password";}'),
                    'fs_syndication' => unserialize('N;'),
                    'backend' => unserialize('i:1;'),
                    'rdf_file' => getPath('public').'backend/geeklog.rss',
                    'rdf_limit' => unserialize('i:10;'),
                    'rdf_storytext' => unserialize('i:1;'),
                    'rdf_language' => unserialize('s:5:"en-gb";'),
                    'syndication_max_headlines' => unserialize('i:0;'),
                    'fs_paths' => unserialize('N;'),
                    'path_html' => getPath('public').'',
                    'path_log' => getPath('root').'logs/',
                    'path_language' => getPath('root').'language/',
                    'backup_path' => getPath('root').'backups/',
                    'path_data' => getPath('root').'data/',
                    'path_images' => getPath('public').'images/',
                    'fs_pear' => unserialize('N;'),
                    'have_pear' => unserialize('b:0;'),
                    'path_pear' => getPath('root').'system/pear/',
                    'fs_mysql' => unserialize('N;'),
                    'allow_mysqldump' => unserialize('i:1;'),
                    'mysqldump_path' => unserialize('s:18:"/usr/bin/mysqldump";'),
                    'mysqldump_options' => unserialize('s:2:"-Q";'),
                    'fs_search' => unserialize('N;'),
                    'num_search_results' => unserialize('i:30;'),
                    'sg_stories' => unserialize('N;'),
                    'fs_story' => unserialize('N;'),
                    'maximagesperarticle' => unserialize('i:5;'),
                    'limitnews' => unserialize('i:10;'),
                    'minnews' => unserialize('i:1;'),
                    'contributedbyline' => unserialize('i:1;'),
                    'hideviewscount' => unserialize('i:0;'),
                    'hideemailicon' => unserialize('i:0;'),
                    'hideprintericon' => unserialize('i:0;'),
                    'allow_page_breaks' => unserialize('i:1;'),
                    'page_break_comments' => unserialize('s:4:"last";'),
                    'article_image_align' => unserialize('s:5:"right";'),
                    'show_topic_icon' => unserialize('i:1;'),
                    'draft_flag' => unserialize('i:0;'),
                    'frontpage' => unserialize('i:1;'),
                    'hide_no_news_msg' => unserialize('i:0;'),
                    'hide_main_page_navigation' => unserialize('i:0;'),
                    'onlyrootfeatures' => unserialize('i:0;'),
                    'aftersave_story' => unserialize('s:4:"list";'),
                    'fs_trackback' => unserialize('N;'),
                    'trackback_enabled' => unserialize('b:1;'),
                    'trackback_code' => unserialize('i:0;'),
                    'trackbackspeedlimit' => unserialize('i:300;'),
                    'check_trackback_link' => unserialize('i:2;'),
                    'multiple_trackbacks' => unserialize('i:0;'),
                    'fs_pingback' => unserialize('N;'),
                    'pingback_enabled' => unserialize('b:1;'),
                    'pingback_excerpt' => unserialize('b:1;'),
                    'pingback_self' => unserialize('i:0;'),
                    'ping_enabled' => unserialize('b:1;'),
                    'sg_theme' => unserialize('N;'),
                    'fs_theme' => unserialize('N;'),
                    'theme' => unserialize('s:12:"professional";'),
                    'menu_elements' => unserialize('a:5:{i:0;s:10:"contribute";i:1;s:6:"search";i:2;s:5:"stats";i:3;s:9:"directory";i:4;s:7:"plugins";}'),
                    'path_themes' => getPath('public').'layout/',
                    'fs_theme_advanced' => unserialize('N;'),
                    'show_right_blocks' => unserialize('b:0;'),
                    'showfirstasfeatured' => unserialize('i:0;'),
                    'sg_blocks' => unserialize('N;'),
                    'fs_admin_block' => unserialize('N;'),
                    'sort_admin' => unserialize('b:1;'),
                    'link_documentation' => unserialize('i:1;'),
                    'link_versionchecker' => unserialize('i:1;'),
                    'fs_topics_block' => unserialize('N;'),
                    'sortmethod' => unserialize('s:7:"sortnum";'),
                    'showstorycount' => unserialize('i:1;'),
                    'showsubmissioncount' => unserialize('i:1;'),
                    'hide_home_link' => unserialize('i:0;'),
                    'fs_whosonline_block' => unserialize('N;'),
                    'whosonline_threshold' => unserialize('i:300;'),
                    'whosonline_anonymous' => unserialize('i:0;'),
                    'fs_whatsnew_block' => unserialize('N;'),
                    'newstoriesinterval' => unserialize('i:86400;'),
                    'newcommentsinterval' => unserialize('i:172800;'),
                    'newtrackbackinterval' => unserialize('i:172800;'),
                    'hidenewstories' => unserialize('i:0;'),
                    'hidenewcomments' => unserialize('i:0;'),
                    'hidenewtrackbacks' => unserialize('i:0;'),
                    'hidenewplugins' => unserialize('i:0;'),
                    'title_trim_length' => unserialize('i:20;'),
                    'sg_users' => unserialize('N;'),
                    'fs_users' => unserialize('N;'),
                    'disable_new_user_registration' => unserialize('b:0;'),
                    'allow_user_themes' => unserialize('i:1;'),
                    'allow_user_language' => unserialize('i:1;'),
                    'allow_user_photo' => unserialize('i:1;'),
                    'allow_username_change' => unserialize('i:0;'),
                    'allow_account_delete' => unserialize('i:0;'),
                    'hide_author_exclusion' => unserialize('i:0;'),
                    'show_fullname' => unserialize('i:0;'),
                    'show_servicename' => unserialize('b:1;'),
                    'custom_registration' => unserialize('b:0;'),
                    'user_login_method' => unserialize('a:3:{s:8:"standard";b:1;s:6:"openid";b:0;s:8:"3rdparty";b:0;}'),
                    'aftersave_user' => unserialize('s:4:"item";'),
                    'fs_spamx' => unserialize('N;'),
                    'spamx' => unserialize('i:128;'),
                    'fs_login' => unserialize('N;'),
                    'lastlogin' => unserialize('b:1;'),
                    'loginrequired' => unserialize('i:0;'),
                    'submitloginrequired' => unserialize('i:0;'),
                    'commentsloginrequired' => unserialize('i:0;'),
                    'statsloginrequired' => unserialize('i:0;'),
                    'searchloginrequired' => unserialize('i:0;'),
                    'profileloginrequired' => unserialize('i:0;'),
                    'emailuserloginrequired' => unserialize('i:0;'),
                    'emailstoryloginrequired' => unserialize('i:0;'),
                    'directoryloginrequired' => unserialize('i:0;'),
                    'passwordspeedlimit' => unserialize('i:300;'),
                    'login_attempts' => unserialize('i:3;'),
                    'login_speedlimit' => unserialize('i:300;'),
                    'fs_user_submission' => unserialize('N;'),
                    'usersubmission' => unserialize('i:0;'),
                    'allow_domains' => unserialize('s:0:"";'),
                    'disallow_domains' => unserialize('s:0:"";'),
                    'fs_submission' => unserialize('N;'),
                    'storysubmission' => unserialize('i:1;'),
                    'listdraftstories' => unserialize('i:0;'),
                    'postmode' => unserialize('s:9:"plaintext";'),
                    'speedlimit' => unserialize('i:45;'),
                    'skip_preview' => unserialize('i:0;'),
                    'advanced_editor' => unserialize('b:0;'),
                    'wikitext_editor' => unserialize('b:0;'),
                    'fs_comments' => unserialize('N;'),
                    'commentspeedlimit' => unserialize('i:45;'),
                    'comment_limit' => unserialize('i:100;'),
                    'comment_mode' => unserialize('s:8:"threaded";'),
                    'comment_code' => unserialize('i:0;'),
                    'sg_images' => unserialize('N;'),
                    'fs_imagelib' => unserialize('N;'),
                    'image_lib' => unserialize('s:0:"";'),
                    'path_to_mogrify' => unserialize('unset'),
                    'path_to_netpbm' => unserialize('unset'),
                    'fs_upload' => unserialize('N;'),
                    'keep_unscaled_image' => unserialize('i:0;'),
                    'allow_user_scaling' => unserialize('i:1;'),
                    'debug_image_upload' => unserialize('b:0;'),
                    'fs_articleimg' => unserialize('N;'),
                    'max_image_width' => unserialize('i:160;'),
                    'max_image_height' => unserialize('i:160;'),
                    'max_image_size' => unserialize('i:1048576;'),
                    'fs_topicicon' => unserialize('N;'),
                    'max_topicicon_width' => unserialize('i:48;'),
                    'max_topicicon_height' => unserialize('i:48;'),
                    'max_topicicon_size' => unserialize('i:65536;'),
                    'fs_userphoto' => unserialize('N;'),
                    'max_photo_width' => unserialize('i:128;'),
                    'max_photo_height' => unserialize('i:128;'),
                    'max_photo_size' => unserialize('i:65536;'),
                    'force_photo_width' => unserialize('unset'),
                    'default_photo' => unserialize('unset'),
                    'fs_gravatar' => unserialize('N;'),
                    'use_gravatar' => unserialize('b:0;'),
                    'gravatar_rating' => unserialize('unset'),
                    'sg_locale' => unserialize('N;'),
                    'fs_language' => unserialize('N;'),
                    'language' => unserialize('s:7:"english";'),
                    'language_files' => unserialize('unset'),
                    'languages' => unserialize('unset'),
                    'fs_locale' => unserialize('N;'),
                    'locale' => unserialize('s:5:"en_GB";'),
                    'date' => unserialize('s:26:"%A, %B %d %Y @ %I:%M %p %Z";'),
                    'daytime' => unserialize('s:13:"%m/%d %I:%M%p";'),
                    'shortdate' => unserialize('s:2:"%x";'),
                    'dateonly' => unserialize('s:5:"%d-%b";'),
                    'timeonly' => unserialize('s:7:"%I:%M%p";'),
                    'week_start' => unserialize('s:3:"Sun";'),
                    'hour_mode' => unserialize('i:12;'),
                    'thousand_separator' => unserialize('s:1:",";'),
                    'decimal_separator' => unserialize('s:1:".";'),
                    'decimal_count' => unserialize('s:1:"2";'),
                    'timezone' => unserialize('unset'),
                    'sg_misc' => unserialize('N;'),
                    'fs_cookies' => unserialize('N;'),
                    'cookie_session' => unserialize('s:10:"gl_session";'),
                    'cookie_name' => unserialize('s:7:"geeklog";'),
                    'cookie_password' => unserialize('s:8:"password";'),
                    'cookie_theme' => unserialize('s:5:"theme";'),
                    'cookie_language' => unserialize('s:8:"language";'),
                    'cookie_tzid' => unserialize('s:8:"timezone";'),
                    'cookie_ip' => unserialize('i:0;'),
                    'default_perm_cookie_timeout' => unserialize('i:28800;'),
                    'session_cookie_timeout' => unserialize('i:7200;'),
                    'cookie_path' => unserialize('s:1:"/";'),
                    'cookiedomain' => unserialize('s:0:"";'),
                    'cookiesecure' => unserialize('b:0;'),
                    'fs_misc' => unserialize('N;'),
                    'notification' => unserialize('i:0;'),
                    'cron_schedule_interval' => unserialize('i:86400;'),
                    'disable_autolinks' => unserialize('i:0;'),
                    'fs_debug' => unserialize('N;'),
                    'rootdebug' => unserialize('b:0;'),
                    'fs_daily_digest' => unserialize('N;'),
                    'emailstories' => unserialize('i:0;'),
                    'emailstorieslength' => unserialize('i:1;'),
                    'emailstoriesperdefault' => unserialize('i:0;'),
                    'fs_htmlfilter' => unserialize('N;'),
                    'user_html' => unserialize('a:14:{s:1:"p";a:0:{}s:1:"b";a:0:{}s:6:"strong";a:0:{}s:1:"i";a:0:{}s:1:"a";a:3:{s:4:"href";i:1;s:5:"title";i:1;s:3:"rel";i:1;}s:2:"em";a:0:{}s:2:"br";a:0:{}s:2:"tt";a:0:{}s:2:"hr";a:0:{}s:2:"li";a:0:{}s:2:"ol";a:0:{}s:2:"ul";a:0:{}s:4:"code";a:0:{}s:3:"pre";a:0:{}}'),
                    'admin_html' => unserialize('a:7:{s:1:"p";a:3:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;}s:3:"div";a:2:{s:5:"class";i:1;s:2:"id";i:1;}s:4:"span";a:2:{s:5:"class";i:1;s:2:"id";i:1;}s:5:"table";a:6:{s:5:"class";i:1;s:2:"id";i:1;s:5:"width";i:1;s:6:"border";i:1;s:11:"cellspacing";i:1;s:11:"cellpadding";i:1;}s:2:"tr";a:4:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;s:6:"valign";i:1;}s:2:"th";a:6:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;s:6:"valign";i:1;s:7:"colspan";i:1;s:7:"rowspan";i:1;}s:2:"td";a:6:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;s:6:"valign";i:1;s:7:"colspan";i:1;s:7:"rowspan";i:1;}}'),
                    'skip_html_filter_for_root' => unserialize('i:0;'),
                    'allowed_protocols' => unserialize('a:3:{i:0;s:4:"http";i:1;s:3:"ftp";i:2;s:5:"https";}'),
                    'fs_censoring' => unserialize('N;'),
                    'censormode' => unserialize('i:1;'),
                    'censorreplace' => unserialize('s:10:"*censored*";'),
                    'censorlist' => unserialize('a:14:{i:0;s:4:"fuck";i:1;s:4:"cunt";i:2;s:6:"fucker";i:3;s:7:"fucking";i:4;s:5:"pussy";i:5;s:4:"cock";i:6;s:4:"c0ck";i:7;s:5:" cum ";i:8;s:4:"twat";i:9;s:4:"clit";i:10;s:5:"bitch";i:11;s:3:"fuk";i:12;s:6:"fuking";i:13;s:12:"motherfucker";}'),
                    'fs_iplookup' => unserialize('N;'),
                    'ip_lookup' => unserialize('unset'),
                    'fs_perm_story' => unserialize('N;'),
                    'default_permissions_story' => unserialize('a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}'),
                    'fs_perm_topic' => unserialize('N;'),
                    'default_permissions_topic' => unserialize('a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}'),
                    'fs_perm_block' => unserialize('N;'),
                    'default_permissions_block' => unserialize('a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}'),
                    'fs_webservices' => unserialize('N;'),
                    'disable_webservices' => unserialize('i:0;'),
                    'restrict_webservices' => unserialize('i:0;'),
                    'atom_max_stories' => unserialize('i:10;'),
                    'sg_main' => unserialize('N;'),
                    'fs_main' => unserialize('N;'),
                    'calendarloginrequired' => unserialize('i:0;'),
                    'hidecalendarmenu' => unserialize('i:0;'),
                    'personalcalendars' => unserialize('i:1;'),
                    'eventsubmission' => unserialize('i:1;'),
                    'showupcomingevents' => unserialize('i:1;'),
                    'upcomingeventsrange' => unserialize('i:14;'),
                    'event_types' => unserialize('a:13:{i:0;s:11:"Anniversary";i:1;s:11:"Appointment";i:2;s:8:"Birthday";i:3;s:8:"Business";i:4;s:9:"Education";i:5;s:7:"Holiday";i:6;s:7:"Meeting";i:7;s:13:"Miscellaneous";i:8;s:8:"Personal";i:9;s:10:"Phone Call";i:10;s:16:"Special Occasion";i:11;s:6:"Travel";i:12;s:8:"Vacation";}'),
                    'delete_event' => unserialize('i:0;'),
                    'aftersave' => unserialize('s:4:"list";'),
                    'fs_permissions' => unserialize('N;'),
                    'default_permissions' => unserialize('a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}'),
                    'fs_public' => unserialize('N;'),
                    'linksloginrequired' => unserialize('i:0;'),
                    'linkcols' => unserialize('i:3;'),
                    'linksperpage' => unserialize('i:10;'),
                    'show_top10' => unserialize('b:1;'),
                    'show_category_descriptions' => unserialize('b:1;'),
                    'fs_admin' => unserialize('N;'),
                    'hidenewlinks' => unserialize('i:0;'),
                    'newlinksinterval' => unserialize('i:1209600;'),
                    'hidelinksmenu' => unserialize('i:0;'),
                    'linksubmission' => unserialize('i:1;'),
                    'delete_links' => unserialize('i:0;'),
                    'root' => unserialize('s:4:"site";'),
                    'pollsloginrequired' => unserialize('i:0;'),
                    'hidepollsmenu' => unserialize('i:0;'),
                    'maxquestions' => unserialize('i:5;'),
                    'maxanswers' => unserialize('i:8;'),
                    'answerorder' => unserialize('s:11:"submitorder";'),
                    'pollcookietime' => unserialize('i:86400;'),
                    'polladdresstime' => unserialize('i:604800;'),
                    'delete_polls' => unserialize('i:0;'),
                    'logging' => unserialize('b:1;'),
                    'admin_override' => unserialize('b:0;'),
                    'timeout' => unserialize('i:5;'),
                    'notification_email' => unserialize('unset'),
                    'action' => unserialize('unset'),
                    'allow_php' => unserialize('i:1;'),
                    'sort_by' => unserialize('s:2:"id";'),
                    'sort_menu_by' => unserialize('s:5:"label";'),
                    'delete_pages' => unserialize('i:0;'),
                    'in_block' => unserialize('i:1;'),
                    'show_hits' => unserialize('i:1;'),
                    'show_date' => unserialize('i:1;'),
                    'filter_html' => unserialize('i:0;'),
                    'censor' => unserialize('i:1;'),
                    'atom_max_items' => unserialize('i:10;'),
                    'jpeg_quality' => unserialize('unset'),
                    'advanced_html' => unserialize('a:1:{s:3:"img";a:7:{s:5:"width";i:1;s:6:"height";i:1;s:3:"src";i:1;s:5:"align";i:1;s:6:"valign";i:1;s:6:"border";i:1;s:3:"alt";i:1;}}'),
                    'search_style' => unserialize('s:6:"google";'),
                    'search_limits' => unserialize('s:11:"10,15,25,30";'),
                    'search_show_limit' => unserialize('b:1;'),
                    'search_show_sort' => unserialize('b:1;'),
                    'search_show_num' => unserialize('b:1;'),
                    'search_show_type' => unserialize('b:1;'),
                    'search_separator' => unserialize('s:6:" &gt; ";'),
                    'search_def_keytype' => unserialize('s:6:"phrase";'),
                    'search_use_fulltext' => unserialize('b:0;'),
                    'mysqldump_filename_mask' => unserialize('s:39:"geeklog_db_backup_%Y_%m_%d_%H_%M_%S.sql";'),
                    'doctype' => unserialize('s:13:"html401strict";'),
                    'comment_edit' => unserialize('i:0;'),
                    'commentsubmission' => unserialize('i:0;'),
                    'comment_edittime' => unserialize('i:1800;'),
                    'article_comment_close_days' => unserialize('i:30;'),
                    'comment_close_rec_stories' => unserialize('i:0;'),
                    'allow_reply_notifications' => unserialize('i:0;'),
                    'cookie_anon_name' => unserialize('s:9:"anon_name";'),
                    'clickable_links' => unserialize('i:1;'),
                    'compressed_output' => unserialize('i:0;'),
                    'new_window' => unserialize('b:0;'),
                    'fs_cpermissions' => unserialize('N;'),
                    'category_permissions' => unserialize('a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}'),
                    'sitemap_file' => unserialize('s:11:"sitemap.xml";'),
                    'mobile_sitemap_file' => unserialize('unset'),
                    'types' => unserialize('a:3:{i:0;s:7:"article";i:1;s:11:"staticpages";i:2;s:8:"calendar";}'),
                    'exclude' => unserialize('a:1:{i:0;s:5:"links";}'),
                    'fs_pri' => unserialize('N;'),
                    'priorities' => unserialize('a:3:{s:7:"article";d:0.5;s:11:"staticpages";d:0.5;s:8:"calendar";d:0.5;}'),
                    'fs_freq' => unserialize('N;'),
                    'frequencies' => unserialize('a:3:{s:7:"article";s:5:"daily";s:11:"staticpages";s:6:"weekly";s:8:"calendar";s:5:"daily";}'),
                );
        $_CONF = $this->x->get_CONF();
        $i = 0;
        foreach($_CONF as $k => $v) {
            $i++;
            $this->assertEquals($dummy[$k], $v, 'Failure on line '.$i+20);
        }
    }
    
}

?>

<?php 

/**
* Simple tests for calendarClassTest
*/

require_once 'PHPUnit/Framework.php';
require_once '../config.php';
require_once getPath('tests').'/databases/xmldb.class.php';

class xmldbClassTest extends PHPUnit_Framework_TestCase 
{
    private $x;
    
    protected function setUp() {
        $this->x = new Xmldb;
    }
    
    public function testGetCONF() {
        $dummy = array(
                    'sg_site' => 'N;',
                    'fs_site' => 'N;',
                    'site_url' => 's:28:"http://localhost/public_html";',
                    'site_admin_url' => 's:34:"http://localhost/public_html/admin";',
                    'site_name' => 's:12:"Geeklog Site";',
                    'site_slogan' => 's:26:"Another Nifty Geeklog Site";',
                    'microsummary_short' => 's:4:"GL: ";',
                    'site_disabled_msg' => 's:44:"Geeklog Site is down. Please come back soon.";',
                    'copyrightyear' => 'unset',
                    'url_rewrite' => 'b:0;',
                    'fs_mail' => 'N;',
                    'site_mail' => 's:15:"admin@localhost";',
                    'noreply_mail' => 's:17:"noreply@localhost";',
                    'mail_settings' => 'a:8:{s:7:"backend";s:4:"mail";s:13:"sendmail_path";s:17:"/usr/bin/sendmail";s:13:"sendmail_args";s:0:"";s:4:"host";s:16:"smtp.example.com";s:4:"port";s:2:"25";s:4:"auth";b:0;s:8:"username";s:13:"smtp-username";s:8:"password";s:13:"smtp-password";}',
                    'fs_syndication' => 'N;',
                    'backend' => 'i:1;',
                    'rdf_file' => 's:51:&quot;'.getPath('public').'/backend/geeklog.rss&quot;;;',
                    'rdf_limit' => 'i:10;',
                    'rdf_storytext' => 'i:1;',
                    'rdf_language' => 's:5:"en-gb";',
                    'syndication_max_headlines' => 'i:0;',
                    'fs_paths' => 'N;',
                    'path_html' => 's:32:&quot;'.getPath('public').'/&quot;;',
                    'path_log' => 's:26:&quot;'.getPath('restricted').'/logs/&quot;;',
                    'path_language' => 's:30:"'.getPath('restricted').'/language/";',
                    'backup_path' => 's:29:&quot;'.getPath('restricted').'/backups/&quot;;',
                    'path_data' => 's:26:&quot;'.getPath('restricted').'/data/&quot;;',
                    'path_images' => 's:39:&quot;'.getPath('public').'/images/&quot;;',
                    'fs_pear' => 'N;',
                    'have_pear' => 'b:0;',
                    'path_pear' => 's:33:&quot;'.getPath('restricted').'/system/pear/&quot;;',
                    'fs_mysql' => 'N;',
                    'allow_mysqldump' => 'i:1;',
                    'mysqldump_path' => 's:18:"/usr/bin/mysqldump";',
                    'mysqldump_options' => 's:2:"-Q";',
                    'fs_search' => 'N;',
                    'num_search_results' => 'i:30;',
                    'sg_stories' => 'N;',
                    'fs_story' => 'N;',
                    'maximagesperarticle' => 'i:5;',
                    'limitnews' => 'i:10;',
                    'minnews' => 'i:1;',
                    'contributedbyline' => 'i:1;',
                    'hideviewscount' => 'i:0;',
                    'hideemailicon' => 'i:0;',
                    'hideprintericon' => 'i:0;',
                    'allow_page_breaks' => 'i:1;',
                    'page_break_comments' => 's:4:"last";',
                    'article_image_align' => 's:5:"right";',
                    'show_topic_icon' => 'i:1;',
                    'draft_flag' => 'i:0;',
                    'frontpage' => 'i:1;',
                    'hide_no_news_msg' => 'i:0;',
                    'hide_main_page_navigation' => 'i:0;',
                    'onlyrootfeatures' => 'i:0;',
                    'aftersave_story' => 's:4:"list";',
                    'fs_trackback' => 'N;',
                    'trackback_enabled' => 'b:1;',
                    'trackback_code' => 'i:0;',
                    'trackbackspeedlimit' => 'i:300;',
                    'check_trackback_link' => 'i:2;',
                    'multiple_trackbacks' => 'i:0;',
                    'fs_pingback' => 'N;',
                    'pingback_enabled' => 'b:1;',
                    'pingback_excerpt' => 'b:1;',
                    'pingback_self' => 'i:0;',
                    'ping_enabled' => 'b:1;',
                    'sg_theme' => 'N;',
                    'fs_theme' => 'N;',
                    'theme' => 's:12:"professional";',
                    'menu_elements' => 'a:5:{i:0;s:10:"contribute";i:1;s:6:"search";i:2;s:5:"stats";i:3;s:9:"directory";i:4;s:7:"plugins";}',
                    'path_themes' => 's:39:&quot;'.getPath('public').'/layout/&quot;;',
                    'fs_theme_advanced' => 'N;',
                    'show_right_blocks' => 'b:0;',
                    'showfirstasfeatured' => 'i:0;',
                    'sg_blocks' => 'N;',
                    'fs_admin_block' => 'N;',
                    'sort_admin' => 'b:1;',
                    'link_documentation' => 'i:1;',
                    'link_versionchecker' => 'i:1;',
                    'fs_topics_block' => 'N;',
                    'sortmethod' => 's:7:"sortnum";',
                    'showstorycount' => 'i:1;',
                    'showsubmissioncount' => 'i:1;',
                    'hide_home_link' => 'i:0;',
                    'fs_whosonline_block' => 'N;',
                    'whosonline_threshold' => 'i:300;',
                    'whosonline_anonymous' => 'i:0;',
                    'fs_whatsnew_block' => 'N;',
                    'newstoriesinterval' => 'i:86400;',
                    'newcommentsinterval' => 'i:172800;',
                    'newtrackbackinterval' => 'i:172800;',
                    'hidenewstories' => 'i:0;',
                    'hidenewcomments' => 'i:0;',
                    'hidenewtrackbacks' => 'i:0;',
                    'hidenewplugins' => 'i:0;',
                    'title_trim_length' => 'i:20;',
                    'sg_users' => 'N;',
                    'fs_users' => 'N;',
                    'disable_new_user_registration' => 'b:0;',
                    'allow_user_themes' => 'i:1;',
                    'allow_user_language' => 'i:1;',
                    'allow_user_photo' => 'i:1;',
                    'allow_username_change' => 'i:0;',
                    'allow_account_delete' => 'i:0;',
                    'hide_author_exclusion' => 'i:0;',
                    'show_fullname' => 'i:0;',
                    'show_servicename' => 'b:1;',
                    'custom_registration' => 'b:0;',
                    'user_login_method' => 'a:3:{s:8:"standard";b:1;s:6:"openid";b:0;s:8:"3rdparty";b:0;}',
                    'aftersave_user' => 's:4:"item";',
                    'fs_spamx' => 'N;',
                    'spamx' => 'i:128;',
                    'fs_login' => 'N;',
                    'lastlogin' => 'b:1;',
                    'loginrequired' => 'i:0;',
                    'submitloginrequired' => 'i:0;',
                    'commentsloginrequired' => 'i:0;',
                    'statsloginrequired' => 'i:0;',
                    'searchloginrequired' => 'i:0;',
                    'profileloginrequired' => 'i:0;',
                    'emailuserloginrequired' => 'i:0;',
                    'emailstoryloginrequired' => 'i:0;',
                    'directoryloginrequired' => 'i:0;',
                    'passwordspeedlimit' => 'i:300;',
                    'login_attempts' => 'i:3;',
                    'login_speedlimit' => 'i:300;',
                    'fs_user_submission' => 'N;',
                    'usersubmission' => 'i:0;',
                    'allow_domains' => 's:0:"";',
                    'disallow_domains' => 's:0:"";',
                    'fs_submission' => 'N;',
                    'storysubmission' => 'i:1;',
                    'listdraftstories' => 'i:0;',
                    'postmode' => 's:9:"plaintext";',
                    'speedlimit' => 'i:45;',
                    'skip_preview' => 'i:0;',
                    'advanced_editor' => 'b:0;',
                    'wikitext_editor' => 'b:0;',
                    'fs_comments' => 'N;',
                    'commentspeedlimit' => 'i:45;',
                    'comment_limit' => 'i:100;',
                    'comment_mode' => 's:8:"threaded";',
                    'comment_code' => 'i:0;',
                    'sg_images' => 'N;',
                    'fs_imagelib' => 'N;',
                    'image_lib' => 's:0:"";',
                    'path_to_mogrify' => 'unset',
                    'path_to_netpbm' => 'unset',
                    'fs_upload' => 'N;',
                    'keep_unscaled_image' => 'i:0;',
                    'allow_user_scaling' => 'i:1;',
                    'debug_image_upload' => 'b:0;',
                    'fs_articleimg' => 'N;',
                    'max_image_width' => 'i:160;',
                    'max_image_height' => 'i:160;',
                    'max_image_size' => 'i:1048576;',
                    'fs_topicicon' => 'N;',
                    'max_topicicon_width' => 'i:48;',
                    'max_topicicon_height' => 'i:48;',
                    'max_topicicon_size' => 'i:65536;',
                    'fs_userphoto' => 'N;',
                    'max_photo_width' => 'i:128;',
                    'max_photo_height' => 'i:128;',
                    'max_photo_size' => 'i:65536;',
                    'force_photo_width' => 'unset',
                    'default_photo' => 'unset',
                    'fs_gravatar' => 'N;',
                    'use_gravatar' => 'b:0;',
                    'gravatar_rating' => 'unset',
                    'sg_locale' => 'N;',
                    'fs_language' => 'N;',
                    'language' => 's:7:"english";',
                    'language_files' => 'unset',
                    'languages' => 'unset',
                    'fs_locale' => 'N;',
                    'locale' => 's:5:"en_GB";',
                    'date' => 's:26:"%A, %B %d %Y @ %I:%M %p %Z";',
                    'daytime' => 's:13:"%m/%d %I:%M%p";',
                    'shortdate' => 's:2:"%x";',
                    'dateonly' => 's:5:"%d-%b";',
                    'timeonly' => 's:7:"%I:%M%p";',
                    'week_start' => 's:3:"Sun";',
                    'hour_mode' => 'i:12;',
                    'thousand_separator' => 's:1:",";',
                    'decimal_separator' => 's:1:".";',
                    'decimal_count' => 's:1:"2";',
                    'timezone' => 'unset',
                    'sg_misc' => 'N;',
                    'fs_cookies' => 'N;',
                    'cookie_session' => 's:10:"gl_session";',
                    'cookie_name' => 's:7:"geeklog";',
                    'cookie_password' => 's:8:"password";',
                    'cookie_theme' => 's:5:"theme";',
                    'cookie_language' => 's:8:"language";',
                    'cookie_tzid' => 's:8:"timezone";',
                    'cookie_ip' => 'i:0;',
                    'default_perm_cookie_timeout' => 'i:28800;',
                    'session_cookie_timeout' => 'i:7200;',
                    'cookie_path' => 's:1:"/";',
                    'cookiedomain' => 's:0:"";',
                    'cookiesecure' => 'b:0;',
                    'fs_misc' => 'N;',
                    'notification' => 'i:0;',
                    'cron_schedule_interval' => 'i:86400;',
                    'disable_autolinks' => 'i:0;',
                    'fs_debug' => 'N;',
                    'rootdebug' => 'b:0;',
                    'fs_daily_digest' => 'N;',
                    'emailstories' => 'i:0;',
                    'emailstorieslength' => 'i:1;',
                    'emailstoriesperdefault' => 'i:0;',
                    'fs_htmlfilter' => 'N;',
                    'user_html' => 'a:14:{s:1:"p";a:0:{}s:1:"b";a:0:{}s:6:"strong";a:0:{}s:1:"i";a:0:{}s:1:"a";a:3:{s:4:"href";i:1;s:5:"title";i:1;s:3:"rel";i:1;}s:2:"em";a:0:{}s:2:"br";a:0:{}s:2:"tt";a:0:{}s:2:"hr";a:0:{}s:2:"li";a:0:{}s:2:"ol";a:0:{}s:2:"ul";a:0:{}s:4:"code";a:0:{}s:3:"pre";a:0:{}}',
                    'admin_html' => 'a:7:{s:1:"p";a:3:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;}s:3:"div";a:2:{s:5:"class";i:1;s:2:"id";i:1;}s:4:"span";a:2:{s:5:"class";i:1;s:2:"id";i:1;}s:5:"table";a:6:{s:5:"class";i:1;s:2:"id";i:1;s:5:"width";i:1;s:6:"border";i:1;s:11:"cellspacing";i:1;s:11:"cellpadding";i:1;}s:2:"tr";a:4:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;s:6:"valign";i:1;}s:2:"th";a:6:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;s:6:"valign";i:1;s:7:"colspan";i:1;s:7:"rowspan";i:1;}s:2:"td";a:6:{s:5:"class";i:1;s:2:"id";i:1;s:5:"align";i:1;s:6:"valign";i:1;s:7:"colspan";i:1;s:7:"rowspan";i:1;}}',
                    'skip_html_filter_for_root' => 'i:0;',
                    'allowed_protocols' => 'a:3:{i:0;s:4:"http";i:1;s:3:"ftp";i:2;s:5:"https";}',
                    'fs_censoring' => 'N;',
                    'censormode' => 'i:1;',
                    'censorreplace' => 's:10:"*censored*";',
                    'censorlist' => 'a:14:{i:0;s:4:"fuck";i:1;s:4:"cunt";i:2;s:6:"fucker";i:3;s:7:"fucking";i:4;s:5:"pussy";i:5;s:4:"cock";i:6;s:4:"c0ck";i:7;s:5:" cum ";i:8;s:4:"twat";i:9;s:4:"clit";i:10;s:5:"bitch";i:11;s:3:"fuk";i:12;s:6:"fuking";i:13;s:12:"motherfucker";}',
                    'fs_iplookup' => 'N;',
                    'ip_lookup' => 'unset',
                    'fs_perm_story' => 'N;',
                    'default_permissions_story' => 'a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}',
                    'fs_perm_topic' => 'N;',
                    'default_permissions_topic' => 'a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}',
                    'fs_perm_block' => 'N;',
                    'default_permissions_block' => 'a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}',
                    'fs_webservices' => 'N;',
                    'disable_webservices' => 'i:0;',
                    'restrict_webservices' => 'i:0;',
                    'atom_max_stories' => 'i:10;',
                    'sg_main' => 'N;',
                    'fs_main' => 'N;',
                    'calendarloginrequired' => 'i:0;',
                    'hidecalendarmenu' => 'i:0;',
                    'personalcalendars' => 'i:1;',
                    'eventsubmission' => 'i:1;',
                    'showupcomingevents' => 'i:1;',
                    'upcomingeventsrange' => 'i:14;',
                    'event_types' => 'a:13:{i:0;s:11:"Anniversary";i:1;s:11:"Appointment";i:2;s:8:"Birthday";i:3;s:8:"Business";i:4;s:9:"Education";i:5;s:7:"Holiday";i:6;s:7:"Meeting";i:7;s:13:"Miscellaneous";i:8;s:8:"Personal";i:9;s:10:"Phone Call";i:10;s:16:"Special Occasion";i:11;s:6:"Travel";i:12;s:8:"Vacation";}',
                    'delete_event' => 'i:0;',
                    'aftersave' => 's:4:"list";',
                    'fs_permissions' => 'N;',
                    'default_permissions' => 'a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}',
                    'fs_public' => 'N;',
                    'linksloginrequired' => 'i:0;',
                    'linkcols' => 'i:3;',
                    'linksperpage' => 'i:10;',
                    'show_top10' => 'b:1;',
                    'show_category_descriptions' => 'b:1;',
                    'fs_admin' => 'N;',
                    'hidenewlinks' => 'i:0;',
                    'newlinksinterval' => 'i:1209600;',
                    'hidelinksmenu' => 'i:0;',
                    'linksubmission' => 'i:1;',
                    'delete_links' => 'i:0;',
                    'root' => 's:4:"site";',
                    'pollsloginrequired' => 'i:0;',
                    'hidepollsmenu' => 'i:0;',
                    'maxquestions' => 'i:5;',
                    'maxanswers' => 'i:8;',
                    'answerorder' => 's:11:"submitorder";',
                    'pollcookietime' => 'i:86400;',
                    'polladdresstime' => 'i:604800;',
                    'delete_polls' => 'i:0;',
                    'logging' => 'b:1;',
                    'admin_override' => 'b:0;',
                    'timeout' => 'i:5;',
                    'notification_email' => 'unset',
                    'action' => 'unset',
                    'allow_php' => 'i:1;',
                    'sort_by' => 's:2:"id";',
                    'sort_menu_by' => 's:5:"label";',
                    'delete_pages' => 'i:0;',
                    'in_block' => 'i:1;',
                    'show_hits' => 'i:1;',
                    'show_date' => 'i:1;',
                    'filter_html' => 'i:0;',
                    'censor' => 'i:1;',
                    'atom_max_items' => 'i:10;',
                    'jpeg_quality' => 'unset',
                    'advanced_html' => 'a:1:{s:3:"img";a:7:{s:5:"width";i:1;s:6:"height";i:1;s:3:"src";i:1;s:5:"align";i:1;s:6:"valign";i:1;s:6:"border";i:1;s:3:"alt";i:1;}}',
                    'search_style' => 's:6:"google";',
                    'search_limits' => 's:11:"10,15,25,30";',
                    'search_show_limit' => 'b:1;',
                    'search_show_sort' => 'b:1;',
                    'search_show_num' => 'b:1;',
                    'search_show_type' => 'b:1;',
                    'search_separator' => 's:6:" &gt; ";',
                    'search_def_keytype' => 's:6:"phrase";',
                    'search_use_fulltext' => 'b:0;',
                    'mysqldump_filename_mask' => 's:39:"geeklog_db_backup_%Y_%m_%d_%H_%M_%S.sql";',
                    'doctype' => 's:13:"html401strict";',
                    'comment_edit' => 'i:0;',
                    'commentsubmission' => 'i:0;',
                    'comment_edittime' => 'i:1800;',
                    'article_comment_close_days' => 'i:30;',
                    'comment_close_rec_stories' => 'i:0;',
                    'allow_reply_notifications' => 'i:0;',
                    'cookie_anon_name' => 's:9:"anon_name";',
                    'clickable_links' => 'i:1;',
                    'compressed_output' => 'i:0;',
                    'new_window' => 'b:0;',
                    'fs_cpermissions' => 'N;',
                    'category_permissions' => 'a:4:{i:0;i:3;i:1;i:2;i:2;i:2;i:3;i:2;}',
                    'sitemap_file' => 's:11:"sitemap.xml";',
                    'mobile_sitemap_file' => 'unset',
                    'types' => 'a:3:{i:0;s:7:"article";i:1;s:11:"staticpages";i:2;s:8:"calendar";}',
                    'exclude' => 'a:1:{i:0;s:5:"links";}',
                    'fs_pri' => 'N;',
                    'priorities' => 'a:3:{s:7:"article";d:0.5;s:11:"staticpages";d:0.5;s:8:"calendar";d:0.5;}',
                    'fs_freq' => 'N;',
                    'frequencies' => 'a:3:{s:7:"article";s:5:"daily";s:11:"staticpages";s:6:"weekly";s:8:"calendar";s:5:"daily";}',
                );
        $CONF = $this->x->getCONF();
        $i = 0;
        foreach($CONF as $k => $v) {
            $i++;
            $this->assertEquals($dummy[$k], $v, 'Failure on line '.$i+20);
        }
    }
    
}

?>
